<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>생식과 유전: 체세포 분열 학습</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <!-- Chosen Palette: Calm Harmony (Slate, Amber, Blue, Emerald) -->
    <!-- Application Structure Plan: A thematic, single-page scrolling application with a sticky navigation bar and a new side progress indicator. The structure prioritizes user interaction over the original linear slide format. Key sections are: Key Concepts (interactive diagram), The Process (clickable step-by-step animation with tooltips), and a Review Quiz. Added GSAP for scroll-triggered animations and micro-interactions to enhance engagement. -->
    <!-- Visualization & Content Choices: 1. Chromosome/DNA Relationship: Goal=Organize, Method=Interactive HTML/CSS diagram, Interaction=Hover/click to reveal info. 2. Mitosis Process: Goal=Change, Method=Embedded YouTube video controlled by the YouTube IFrame API. Interaction=Clicking phase buttons seeks to and plays specific time segments of the video, showing the real process. Justification=Replaces animation with real footage for higher accuracy and visual impact. 3. Scroll Animations: Goal=Engage, Method=GSAP + Intersection Observer, Interaction=Scrolling reveals content. Justification=Creates a modern, dynamic user experience. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        html {
            scroll-behavior: smooth; /* JS 스크롤을 위해 부드러운 스크롤 비활성화할 수도 있음 */
        }
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding-top: 5rem; /* 헤더 높이 고려 */
            padding-bottom: 2rem;
        }
        .phase-button.active {
            background-color: #10b981;
            color: white;
            font-weight: 700;
            transform: scale(1.05);
        }
        .quiz-input:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.5);
        }
        #progress-nav a {
            transition: all 0.3s ease;
        }
        #progress-nav a.active {
            transform: scale(1.5);
            background-color: #10b981;
        }
        #player-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
        }
        #player {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <nav id="progress-nav" class="fixed left-4 top-1/2 -translate-y-1/2 z-50 hidden md:flex flex-col space-y-4">
        <a href="#objectives" data-section="objectives" class="w-3 h-3 bg-slate-300 rounded-full block" title="학습 목표"></a>
        <a href="#concepts" data-section="concepts" class="w-3 h-3 bg-slate-300 rounded-full block" title="핵심 개념"></a>
        <a href="#process" data-section="process" class="w-3 h-3 bg-slate-300 rounded-full block" title="분열 과정"></a>
        <a href="#significance" data-section="significance" class="w-3 h-3 bg-slate-300 rounded-full block" title="중요성"></a>
        <a href="#lab" data-section="lab" class="w-3 h-3 bg-slate-300 rounded-full block" title="관찰 실험"></a>
        <a href="#quiz" data-section="quiz" class="w-3 h-3 bg-slate-300 rounded-full block" title="핵심 정리"></a>
    </nav>

    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-40">
        <nav class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="index.html" class="text-xl md:text-2xl font-bold text-emerald-600 hover:text-emerald-700">🏠 체세포 분열 탐험</a>
            <div class="hidden md:flex space-x-6 text-slate-600">
                <a href="#objectives" class="hover:text-emerald-600">학습 목표</a>
                <a href="#concepts" class="hover:text-emerald-600">핵심 개념</a>
                <a href="#process" class="hover:text-emerald-600">분열 과정</a>
                <a href="#significance" class="hover:text-emerald-600">중요성</a>
                <a href="#lab" class="hover:text-emerald-600">관찰 실험</a>
                <a href="#quiz" class="hover:text-emerald-600">핵심 정리</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden p-2 rounded-md hover:bg-slate-100">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden bg-white px-4 pb-4 space-y-2">
            <a href="#objectives" class="block py-2 hover:text-emerald-600">학습 목표</a>
            <a href="#concepts" class="block py-2 hover:text-emerald-600">핵심 개념</a>
            <a href="#process" class="block py-2 hover:text-emerald-600">분열 과정</a>
            <a href="#significance" class="block py-2 hover:text-emerald-600">중요성</a>
            <a href="#lab" class="block py-2 hover:text-emerald-600">관찰 실험</a>
            <a href="#quiz" class="block py-2 hover:text-emerald-600">핵심 정리</a>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        
        <section id="objectives" class="animated-section text-center py-12 md:py-20">
            <div class="bg-amber-50 rounded-2xl p-8">
                <h2 class="text-3xl md:text-4xl font-bold mb-2">V. 생식과 유전</h2>
                <p class="text-xl md:text-2xl text-slate-600 mb-8">1. 염색체 수가 유지되는 세포 분열</p>
                <div class="max-w-2xl mx-auto bg-white p-6 rounded-xl shadow-md space-y-4 text-left">
                    <h3 class="text-xl font-bold text-emerald-700">오늘의 학습 목표 🎯</h3>
                    <p class="text-lg">이 단원을 학습하고 나면, 우리는 다음을 할 수 있게 될 거예요!</p>
                    <ul class="list-disc list-inside space-y-2 text-lg">
                        <li><strong class="text-emerald-600">염색체</strong>와 <strong class="text-emerald-600">유전자</strong>의 관계를 설명할 수 있습니다.</li>
                        <li><strong class="text-emerald-600">체세포 분열</strong>의 특징을 염색체의 행동으로 설명할 수 있습니다.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="concepts" class="animated-section py-16 md:py-24">
            <h2 class="text-3xl font-bold text-center mb-12">핵심 개념 알아보기</h2>
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg">
                <p class="mb-8 text-lg text-slate-600 text-center">우리 몸의 설계도, 유전 정보는 어떻게 담겨 있을까요? 염색체부터 유전자까지, 각 개념들의 관계를 클릭하며 알아보세요.</p>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div class="space-y-4">
                        <div class="p-4 border-l-4 border-blue-500 bg-blue-50 rounded-r-lg cursor-pointer concept-card" data-target="info-chromosome">
                            <h4 class="text-xl font-bold text-blue-800">염색체 (Chromosome)</h4>
                        </div>
                        <div class="p-4 border-l-4 border-purple-500 bg-purple-50 rounded-r-lg cursor-pointer concept-card" data-target="info-dna">
                            <h4 class="text-xl font-bold text-purple-800">DNA와 유전자 (Gene)</h4>
                        </div>
                        <div class="p-4 border-l-4 border-amber-500 bg-amber-50 rounded-r-lg cursor-pointer concept-card" data-target="info-number">
                            <h4 class="text-xl font-bold text-amber-800">염색체 수의 특징</h4>
                        </div>
                    </div>
                    <div id="concept-info-display" class="p-6 bg-slate-100 rounded-lg min-h-[200px] flex items-center justify-center">
                        <div id="info-chromosome" class="concept-info space-y-2">
                            <p class="text-lg">분열 중인 세포에서 유전 물질(DNA)이 꼬이고 뭉쳐서 만들어진 <strong class="text-blue-600">막대 모양</strong>의 구조물입니다.</p>
                        </div>
                        <div id="info-dna" class="concept-info space-y-2 hidden">
                            <p><strong class="text-purple-600">DNA</strong>: 염색체를 구성하는 유전 물질입니다.</p>
                        </div>
                        <div id="info-number" class="concept-info space-y-2 hidden">
                            <p>같은 종의 생물은 <strong class="text-amber-600">염색체의 수와 모양이 같습니다.</strong></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="process" class="animated-section py-16 md:py-24">
            <h2 class="text-3xl font-bold text-center mb-12">체세포 분열 과정</h2>
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg">
                <p class="mb-8 text-lg text-slate-600 text-center">아래 버튼을 클릭하여 각 단계별 실제 영상을 확인해보세요.</p>
                <div class="grid lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-1 flex flex-col space-y-3">
                        <button class="phase-button p-3 rounded-lg text-lg transition-all duration-300 shadow-sm border" data-phase="interphase">간기</button>
                        <button class="phase-button p-3 rounded-lg text-lg transition-all duration-300 shadow-sm border" data-phase="prophase">전기</button>
                        <button class="phase-button p-3 rounded-lg text-lg transition-all duration-300 shadow-sm border" data-phase="metaphase">중기</button>
                        <button class="phase-button p-3 rounded-lg text-lg transition-all duration-300 shadow-sm border" data-phase="anaphase">후기</button>
                        <button class="phase-button p-3 rounded-lg text-lg transition-all duration-300 shadow-sm border" data-phase="telophase">말기</button>
                    </div>
                    <div class="lg:col-span-2 flex flex-col md:flex-row gap-4 items-center">
                        <div class="w-full bg-slate-100 rounded-lg overflow-hidden">
                           <div id="player-container"><div id="player"></div></div>
                        </div>
                        <div id="phase-description" class="w-full md:w-1/2 p-4 bg-emerald-50 rounded-lg min-h-[150px]">
                            <h4 id="phase-title" class="text-xl font-bold text-emerald-800 mb-2">간기</h4>
                            <p id="phase-text" class="text-slate-700">세포가 생장하고 DNA가 복제됩니다.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="significance" class="animated-section py-16 md:py-24">
            <h2 class="text-3xl font-bold text-center mb-12">체세포 분열, 왜 중요할까요?</h2>
             <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white p-8 rounded-2xl shadow-lg text-center">
                    <div class="text-5xl mb-4">🌱</div>
                    <h3 class="text-2xl font-bold mb-2">생물의 성장</h3>
                    <p class="text-slate-600">세포 수를 늘려 몸집이 커지고 키가 자라게 합니다.</p>
                </div>
                <div class="bg-white p-8 rounded-2xl shadow-lg text-center">
                    <div class="text-5xl mb-4">🩹</div>
                    <h3 class="text-2xl font-bold mb-2">손상된 부위 회복 (재생)</h3>
                    <p class="text-slate-600">상처가 났을 때 새로운 세포를 만들어 손상된 부위를 아물게 합니다.</p>
                </div>
            </div>
        </section>
        
        <section id="lab" class="animated-section py-16 md:py-24">
            <h2 class="text-3xl font-bold text-center mb-12">현미경으로 체세포 분열 관찰하기</h2>
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg">
                <p class="mb-8 text-lg text-slate-600 text-center"><strong class="text-emerald-600">양파 뿌리 끝 생장점</strong>을 이용하면 체세포 분열을 직접 관찰할 수 있습니다.</p>
                <div class="flex flex-col md:flex-row justify-center items-stretch gap-4 text-center">
                    <div class="flex-1 p-4 bg-slate-100 rounded-lg">1️⃣<h4 class="font-bold">고정</h4></div>
                    <div class="self-center text-2xl text-slate-400 hidden md:block">→</div>
                    <div class="flex-1 p-4 bg-slate-100 rounded-lg">2️⃣<h4 class="font-bold">해리</h4></div>
                    <div class="self-center text-2xl text-slate-400 hidden md:block">→</div>
                    <div class="flex-1 p-4 bg-slate-100 rounded-lg">3️⃣<h4 class="font-bold">염색</h4></div>
                    <div class="self-center text-2xl text-slate-400 hidden md:block">→</div>
                    <div class="flex-1 p-4 bg-slate-100 rounded-lg">4️⃣<h4 class="font-bold">분리 및 관찰</h4></div>
                </div>
            </div>
        </section>

        <section id="quiz" class="animated-section py-16 md:py-24">
            <h2 class="text-3xl font-bold text-center mb-12">핵심 정리 및 확인 학습</h2>
            <div class="max-w-3xl mx-auto bg-white p-8 rounded-2xl shadow-lg space-y-8">
                <div>
                    <p class="text-lg mb-2">1. 분열 중인 세포에서 유전 물질은 꼬이고 뭉쳐서 막대 모양의 (<input id="q1" type="text" class="quiz-input w-24 mx-1 p-1 text-center border-b-2">)(으)로 나타난다.</p>
                    <button class="check-btn px-4 py-1 bg-emerald-500 text-white rounded-md" data-quiz="q1" data-answer="염색체">정답 확인</button>
                    <span id="q1-feedback" class="ml-2 font-bold"></span>
                </div>
                <div>
                    <p class="text-lg mb-2">2. 체세포 분열 결과 만들어진 2개의 딸세포는 각각 모세포와 염색체 수가 (<input id="q2" type="text" class="quiz-input w-16 mx-1 p-1 text-center border-b-2">).</p>
                    <button class="check-btn px-4 py-1 bg-emerald-500 text-white rounded-md" data-quiz="q2" data-answer="같다">정답 확인</button>
                    <span id="q2-feedback" class="ml-2 font-bold"></span>
                </div>
            </div>
        </section>
    </main>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const slides = document.querySelectorAll('section');
            const progressNavLinks = document.querySelectorAll('#progress-nav a');
            let currentSlideIndex = 0;
            let isScrolling = false;

            function updateNav(index) {
                progressNavLinks.forEach((link, i) => {
                    if (i === index) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
            }

            function scrollToSlide(index) {
                if (isScrolling || index < 0 || index >= slides.length) return;
                isScrolling = true;
                currentSlideIndex = index;
                slides[index].scrollIntoView({ behavior: 'smooth' });
                updateNav(index);
                setTimeout(() => { isScrolling = false; }, 1000); // 스크롤 중복 방지
            }
            
            // 키보드 슬라이드 기능
            document.addEventListener('keydown', (event) => {
                if (event.target.tagName === 'INPUT') return; // 입력 필드에서는 작동안함
                if (event.key === 'ArrowRight') {
                    scrollToSlide(currentSlideIndex + 1);
                } else if (event.key === 'ArrowLeft') {
                    scrollToSlide(currentSlideIndex - 1);
                }
            });
            
            // 스크롤 이벤트로 현재 슬라이드 감지
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const index = Array.from(slides).indexOf(entry.target);
                        currentSlideIndex = index;
                        updateNav(index);
                    }
                });
            }, { threshold: 0.6 });

            slides.forEach(slide => observer.observe(slide));
            
            // 초기 상태 설정
            updateNav(0);

            // YouTube Player Logic
            const phaseButtons = document.querySelectorAll('#process .phase-button');
            const phaseTitle = document.getElementById('phase-title');
            const phaseText = document.getElementById('phase-text');
            let player;
            let intervalId;

            window.onYouTubeIframeAPIReady = function() {
                player = new YT.Player('player', {
                    height: '100%', width: '100%', videoId: 'LM-0RdQbSUs',
                    playerVars: { 'playsinline': 1, 'controls': 0, 'rel': 0 },
                    events: { 'onReady': onPlayerReady }
                });
            }

            function onPlayerReady(event) {
                playSegment('interphase');
            }

            const timeSegments = {
                interphase: { start: 0, end: 3 },
                prophase: { start: 4, end: 9 },
                metaphase: { start: 11, end: 16 },
                anaphase: { start: 21, end: 24 },
                telophase: { start: 26, end: 30 }
            };
            
            const phaseData = {
                interphase: { title: '간기', text: '세포가 생장하고 DNA가 복제됩니다.'},
                prophase: { title: '전기', text: '핵막이 사라지고 염색체가 나타납니다.'},
                metaphase: { title: '중기', text: '염색체들이 세포 중앙에 배열됩니다.'},
                anaphase: { title: '후기', text: '염색분체들이 분리되어 양 끝으로 이동합니다.'},
                telophase: { title: '말기', text: '두 개의 딸세포가 만들어집니다.'}
            };

            function playSegment(phase) {
                if (!player || typeof player.seekTo !== 'function') return;
                const segment = timeSegments[phase];
                if (!segment) return;
                if (intervalId) clearInterval(intervalId);
                player.seekTo(segment.start, true);
                player.playVideo();
                intervalId = setInterval(() => {
                    if (player.getCurrentTime() >= segment.end) {
                        player.pauseVideo();
                        clearInterval(intervalId);
                    }
                }, 250);
            }

            phaseButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const phase = button.dataset.phase;
                    phaseButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    phaseTitle.textContent = phaseData[phase].title;
                    phaseText.textContent = phaseData[phase].text;
                    playSegment(phase);
                });
            });

            // 기타 UI 로직 (모바일 메뉴, 퀴즈 등)
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            
            const conceptCards = document.querySelectorAll('.concept-card');
            const conceptInfos = document.querySelectorAll('.concept-info');
            conceptCards.forEach(card => {
                card.addEventListener('click', () => {
                    const targetId = card.dataset.target;
                    conceptInfos.forEach(info => {
                        info.id === targetId ? info.classList.remove('hidden') : info.classList.add('hidden');
                    });
                });
            });
            
            const checkButtons = document.querySelectorAll('.check-btn');
            checkButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const quizId = button.dataset.quiz;
                    const correctAnswer = button.dataset.answer;
                    const userInput = document.getElementById(quizId).value.trim();
                    const feedbackSpan = document.getElementById(`${quizId}-feedback`);
                    if (userInput.toLowerCase() === correctAnswer.toLowerCase()) {
                        feedbackSpan.textContent = '정답입니다! 👍';
                        feedbackSpan.className = 'ml-2 font-bold text-green-600';
                    } else {
                        feedbackSpan.textContent = '다시 생각해 보세요. 🤔';
                        feedbackSpan.className = 'ml-2 font-bold text-red-600';
                    }
                });
            });
        });
    </script>
</body>
</html>
