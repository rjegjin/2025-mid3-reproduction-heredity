<!DOCTYPE html>
<html lang="ko">
 <head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>
   V. ìƒì‹ê³¼ ìœ ì „ - ë…ë¦½ì˜ ë²•ì¹™ (ì¸í„°ë™í‹°ë¸Œ)
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
   @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap');
        html { scroll-behavior: smooth; }
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f8fafc; color: #1e293b; }
        
        /* --- Layout & Common --- */
        .content-section {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 5rem 1.5rem;
            position: relative;
        }
        .reveal {
            opacity: 0;
            transform: translateY(40px);
        }

        /* --- Navigation & Header --- */
        #progress-nav {
            position: fixed;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            z-index: 50;
            display: none;
        }
        @media (min-width: 1024px) {
            #progress-nav { display: flex; flex-direction: column; gap: 0.75rem; }
        }
        #progress-nav a {
            width: 0.75rem; height: 0.75rem; background-color: #cbd5e1;
            border-radius: 9999px; display: block;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        #progress-nav a.active {
            transform: scale(1.75); background-color: #84cc16;
        }
        header { z-index: 100; }

        /* --- Punnett Square --- */
        .punnett-table {
    border-collapse: collapse;
    font-size: clamp(0.75rem, 2vw, 1.1rem);
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
}
.punnett-table th, .punnett-table td {
    border: 2px solid #9ca3af;
    width: clamp(50px, 10vw, 90px); height: clamp(50px, 10vw, 90px);
    text-align: center; vertical-align: middle;
    position: relative;
}
.punnett-table th { background-color: #f1f5f9; font-weight: bold; }
.punnett-cell span {
    font-weight: 700;
    position: relative;
    z-index: 2; /* ë°°ê²½ íŒ¨í„´ ìœ„ì— í…ìŠ¤íŠ¸ê°€ ì˜¤ë„ë¡ í•¨ */
}

.pea-yellow { background-color: #fef9c3; } /* yellow-100 */
.pea-green { background-color: #ecfccb; } /* lime-100 */

.pea-round { 
    border-style: solid;
}
.pea-wrinkled {
    border-style: dashed;
    border-color: #64748b; /* ì ì„  ìƒ‰ìƒ ì§€ì • */
    border-width: 2px;
    background-image: url("data:image/svg+xml,%3Csvg width='8' height='8' viewBox='0 0 8 8' xmlns='[http://www.w3.org/2000/svg'%3E%3Cg](http://www.w3.org/2000/svg'%3E%3Cg) fill='%239ca3af' fill-opacity='0.3'%3E%3Cpath d='M7 0h1L0 8V7zM8 7v1H7z'/%3E%3C/g%3E%3C/svg%3E");
    background-repeat: repeat;
}

        
        /* --- Quiz --- */
        .quiz-option { transition: all 0.2s ease-in-out; }
        .quiz-option.selected { transform: scale(1.05); border-width: 2px; }
        .quiz-option.correct { background-color: #34d399; color: white; border-color: #059669; }
        .quiz-option.incorrect { background-color: #f87171; color: white; border-color: #dc2626; }
  </style>
 </head>
 <body>
  <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0">
   <nav class="container mx-auto px-4 py-3 flex justify-between items-center">
    <a class="text-xl md:text-2xl font-bold text-lime-600 hover:text-lime-700 transition-colors" href="index.html">
     ğŸ“œ ë©˜ë¸ì˜ ë…ë¦½ ë²•ì¹™
    </a>
    <button class="p-2 text-slate-500 hover:text-lime-600 transition-colors" id="fullscreen-btn" title="ì „ì²´ í™”ë©´">
     <i class="fas fa-expand fa-fw" id="fullscreen-icon">
     </i>
    </button>
   </nav>
  </header>
  <nav id="progress-nav">
  </nav>
  <main class="container mx-auto">
   <section class="content-section text-center" id="s1">
    <div class="reveal">
     <h2 class="text-3xl md:text-4xl font-bold text-slate-600">
      V. ìƒì‹ê³¼ ìœ ì „
     </h2>
     <h1 class="text-5xl md:text-7xl font-black text-lime-600 my-4 tracking-tight">
      ë…ë¦½ì˜ ë²•ì¹™
     </h1>
     <p class="text-xl md:text-2xl text-slate-500">
      ë‘ ìŒì˜ ëŒ€ë¦½ í˜•ì§ˆì€ ì„œë¡œì—ê²Œ ì–´ë–¤ ì˜í–¥ì„ ì¤„ê¹Œ?
     </p>
     <img alt="ë©˜ë¸ì˜ ì •ì›" class="max-w-md mx-auto rounded-lg shadow-xl mt-8" data-asset-id="mendel2_img_1" src="images/mendel_in_garden.jpg">
    </div>
   </section>
   <section class="content-section" id="s2">
    <div class="reveal max-w-3xl w-full bg-white p-8 rounded-xl shadow-lg">
     <h2 class="text-3xl font-bold mb-6 text-center text-lime-700">
      ğŸ¯ í•™ìŠµ ëª©í‘œ
     </h2>
     <ul class="text-xl list-disc list-inside space-y-3">
      <li>
       <strong>
        ë…ë¦½ì˜ ë²•ì¹™
       </strong>
       ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.
      </li>
      <li>
       ë‘ ìŒ ì´ìƒì˜ ëŒ€ë¦½ í˜•ì§ˆì´ í•¨ê»˜ ìœ ì „ë  ë•Œ ë‚˜íƒ€ë‚˜ëŠ” ê²°ê³¼ë¥¼ í•´ì„í•  ìˆ˜ ìˆë‹¤.
      </li>
      <li>
       ë©˜ë¸ì˜ ìœ ì „ ì‹¤í—˜ì´ ì§€ë‹Œ ê³¼í•™ì  ì˜ì˜ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.
      </li>
     </ul>
    </div>
   </section>
   <section class="content-section" id="s3">
    <div class="reveal max-w-4xl w-full grid md:grid-cols-2 gap-8 items-center">
     <div class="bg-white p-8 rounded-xl shadow-lg">
      <h2 class="text-3xl font-bold mb-4">
       ğŸ¤” ë„ì… ì§ˆë¬¸
      </h2>
      <p class="text-lg">
       ì™„ë‘ì˜ ì”¨ ëª¨ì–‘(ë‘¥ê¸€/ì£¼ë¦„)ê³¼ ì”¨ ìƒ‰ê¹”(í™©ìƒ‰/ë…¹ìƒ‰)ì´ í•¨ê»˜ ìœ ì „ë  ë•Œ, ì„œë¡œì˜ ê²°ê³¼ì— ì˜í–¥ì„ ë¯¸ì¹ ê¹Œìš”?
      </p>
      <p class="mt-4 text-lg p-4 bg-lime-50 rounded-lg border-l-4 border-lime-400">
       ë§ˆì¹˜ "ì£¼ì‚¬ìœ„ Aì˜ ê²°ê³¼ê°€ ì£¼ì‚¬ìœ„ Bì˜ ê²°ê³¼ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” ê²ƒ"ì²˜ëŸ¼, ê° í˜•ì§ˆì€ ì™„ì „íˆ ë³„ê°œë¡œ ìœ ì „ë  ê²ƒì´ë¼ ê°€ì„¤ì„ ì„¸ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </p>
     </div>
     <div class="flex justify-center">
      <img alt="ë‘ ê°œì˜ ì£¼ì‚¬ìœ„" class="rounded-lg shadow-md" src="https://placehold.co/400x300/e2e8f0/64748b?text=ë‘ê°œì˜+ì£¼ì‚¬ìœ„">
     </div>
    </div>
   </section>
   <section class="content-section" id="s4">
    <div class="reveal max-w-5xl w-full bg-white p-8 rounded-xl shadow-lg">
     <h2 class="text-3xl font-bold mb-8 text-center">
      ğŸ”¬ ë©˜ë¸ì˜ ì‹¤í—˜ ì„¤ê³„
     </h2>
     <div class="grid md:grid-cols-5 items-center text-center gap-4 text-lg">
      <div class="step p-4 bg-slate-100 rounded-lg">
       <p class="font-bold text-xl">
        1. ì–´ë²„ì´ (P)
       </p>
       <p>
        ìˆœì¢… (ë‘¥ê¸€ê³  í™©ìƒ‰)
       </p>
       <p class="font-bold text-2xl my-2">
        X
       </p>
       <p>
        ìˆœì¢… (ì£¼ë¦„ì§€ê³  ë…¹ìƒ‰)
       </p>
      </div>
      <i class="fas fa-arrow-right text-3xl text-lime-500 hidden md:block">
      </i>
      <div class="step p-4 bg-slate-100 rounded-lg">
       <p class="font-bold text-xl">
        2. ìì† 1ëŒ€ (F1)
       </p>
       <p class="my-2">
        ëª¨ë‘
        <strong class="text-lime-600">
         ë‘¥ê¸€ê³  í™©ìƒ‰
        </strong>
       </p>
       <p class="mt-2 text-base">
        (ìê°€ ìˆ˜ë¶„)
       </p>
      </div>
      <i class="fas fa-arrow-right text-3xl text-lime-500 hidden md:block">
      </i>
      <div class="step p-4 bg-slate-100 rounded-lg">
       <p class="font-bold text-xl">
        3. ìì† 2ëŒ€ (F2)
       </p>
       <p class="my-2">
        í‘œí˜„í˜•ê³¼ ë¹„ìœ¨ ë¶„ì„
       </p>
       <p class="font-bold text-xl text-amber-600">
        9 : 3 : 3 : 1
       </p>
      </div>
     </div>
     <img alt="ë©˜ë¸ì˜ êµë°° ì‹¤í—˜ ê³¼ì •" class="w-full max-w-3xl mx-auto mt-8 rounded-lg shadow-md" data-asset-id="mendel2_img_2" src="images/1st_exp_breeding_P.jpg">
    </div>
   </section>
   <section class="content-section" id="s5">
    <div class="reveal max-w-4xl w-full bg-white p-8 rounded-xl shadow-lg">
     <h2 class="text-3xl font-bold mb-6 text-center">
      ğŸ“Š ì‹¤í—˜ ê²°ê³¼ ë¶„ì„
     </h2>
     <p class="text-xl text-center mb-8">
      F1(RrYy)ì„ ìê°€ìˆ˜ë¶„í•˜ì—¬ ì–»ì€ F2 ì„¸ëŒ€ì˜ ì™„ë‘ì½© 556ê°œë¥¼ ë¶„ì„í–ˆìŠµë‹ˆë‹¤.
     </p>
     <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4 text-center">
      <div class="p-4 bg-yellow-100 rounded-lg">
       <p class="text-2xl font-bold">
        315ê°œ
       </p>
       <p>
        ë‘¥ê¸€ê³  í™©ìƒ‰
       </p>
      </div>
      <div class="p-4 bg-lime-100 rounded-lg">
       <p class="text-2xl font-bold">
        108ê°œ
       </p>
       <p>
        ë‘¥ê¸€ê³  ë…¹ìƒ‰
       </p>
      </div>
      <div class="p-4 bg-yellow-100 rounded-lg">
       <p class="text-2xl font-bold">
        101ê°œ
       </p>
       <p>
        ì£¼ë¦„ì§€ê³  í™©ìƒ‰
       </p>
      </div>
      <div class="p-4 bg-lime-100 rounded-lg">
       <p class="text-2xl font-bold">
        32ê°œ
       </p>
       <p>
        ì£¼ë¦„ì§€ê³  ë…¹ìƒ‰
       </p>
      </div>
     </div>
     <p class="text-center mt-8 text-3xl font-black">
      í‘œí˜„í˜•ì˜ ë¹„ &asymp;
      <span class="text-lime-600">
       9 : 3 : 3 : 1
      </span>
     </p>
    </div>
   </section>
   <section class="content-section" id="s6">
    <div class="reveal max-w-4xl w-full">
     <h2 class="text-3xl font-bold mb-8 text-center">
      ğŸ“ˆ 9:3:3:1 ë¹„ìœ¨ì˜ ë¹„ë°€
     </h2>
     <div class="grid md:grid-cols-2 gap-8 text-center">
      <div class="bg-white p-6 rounded-xl shadow-lg">
       <h3 class="text-2xl font-bold mb-3">
        ëª¨ì–‘ë§Œ ë”°ë¡œ ë³´ë©´?
       </h3>
       <p class="text-xl">
        (315+108) : (101+32) = 423 : 133
       </p>
       <p class="text-3xl font-bold text-lime-600 mt-2">
        &asymp; 3 : 1
       </p>
      </div>
      <div class="bg-white p-6 rounded-xl shadow-lg">
       <h3 class="text-2xl font-bold mb-3">
        ìƒ‰ê¹”ë§Œ ë”°ë¡œ ë³´ë©´?
       </h3>
       <p class="text-xl">
        (315+101) : (108+32) = 416 : 140
       </p>
       <p class="text-3xl font-bold text-lime-600 mt-2">
        &asymp; 3 : 1
       </p>
      </div>
     </div>
     <p class="reveal text-center mt-8 text-2xl font-bold bg-white p-6 rounded-xl shadow-lg">
      ê²°ë¡ : ë‘ í˜•ì§ˆì€
      <span class="text-lime-600">
       ë¶„ë¦¬ì˜ ë²•ì¹™
      </span>
      ì„ ê°ê° ë”°ë¥´ë©°, ì„œë¡œì—ê²Œ ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤!
     </p>
    </div>
   </section>
   <section class="content-section" id="s7">
    <div class="reveal max-w-4xl w-full bg-white p-8 rounded-xl shadow-lg grid md:grid-cols-2 gap-8 items-center">
     <img alt="ìƒì‹ì„¸í¬ í˜•ì„±" class="rounded-lg shadow-md" data-asset-id="mendel2_img_3" src="images/gametes1_med.jpeg">
     <div>
      <h2 class="text-3xl font-bold mb-4">
       ğŸŒ± 4ê°€ì§€ ì¢…ë¥˜ì˜ ìƒì‹ì„¸í¬
      </h2>
      <p class="text-lg">
       F1(RrYy)ì€ ê°ìˆ˜ ë¶„ì—´ì„ í†µí•´ 4ì¢…ë¥˜ì˜ ìƒì‹ì„¸í¬ë¥¼ ë§Œë“­ë‹ˆë‹¤. ëª¨ì–‘ ìœ ì „ì(R/r)ì™€ ìƒ‰ê¹” ìœ ì „ì(Y/y)ê°€ ë…ë¦½ì ìœ¼ë¡œ ë¶„ë¦¬ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
      </p>
      <p class="text-center text-2xl font-bold my-4 p-4 bg-lime-100 rounded-lg">
       RY, Ry, rY, ry
      </p>
      <p class="text-lg text-center">
       ì´ 4ì¢…ë¥˜ëŠ”
       <strong class="text-lime-600">
        1 : 1 : 1 : 1
       </strong>
       ì˜ ë™ì¼í•œ ë¹„ìœ¨ë¡œ ìƒì„±ë©ë‹ˆë‹¤.
      </p>
     </div>
    </div>
   </section>
   <section class="content-section flex-col" id="s8">
    <div class="max-w-5xl w-full text-center">
     <h2 class="text-4xl font-bold mb-2 reveal" id="punnett-title">
      ğŸ“œ ë…ë¦½ì˜ ë²•ì¹™
     </h2>
     <p class="text-xl mb-8 reveal">
      ë‘ ìŒ ì´ìƒì˜ ëŒ€ë¦½ í˜•ì§ˆì´ í•¨ê»˜ ìœ ì „ë  ë•Œ, ê° í˜•ì§ˆì€ ì„œë¡œ ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ë…ë¦½ì ìœ¼ë¡œ ë¶„ë¦¬ë˜ì–´ ìœ ì „ë˜ëŠ” í˜„ìƒ.
     </p>
     <div class="bg-white p-6 rounded-xl shadow-2xl" id="punnett-container">
      <table class="punnett-table mx-auto">
       <thead>
        <tr>
         <th>
         </th>
         <th>
          RY
         </th>
         <th>
          Ry
         </th>
         <th>
          rY
         </th>
         <th>
          ry
         </th>
        </tr>
       </thead>
       <tbody>
        <tr>
         <th>
          RY
         </th>
         <td class="punnett-cell pea-round pea-yellow">
          RRYY
         </td>
         <td class="punnett-cell pea-round pea-yellow">
          RRYy
         </td>
         <td class="punnett-cell pea-round pea-yellow">
          RrYY
         </td>
         <td class="punnett-cell pea-round pea-yellow">
          RrYy
         </td>
        </tr>
        <tr>
         <th>
          Ry
         </th>
         <td class="punnett-cell pea-round pea-yellow">
          RRYy
         </td>
         <td class="punnett-cell pea-round pea-green">
          RRyy
         </td>
         <td class="punnett-cell pea-round pea-yellow">
          RrYy
         </td>
         <td class="punnett-cell pea-round pea-green">
          Rryy
         </td>
        </tr>
        <tr>
         <th>
          rY
         </th>
         <td class="punnett-cell pea-round pea-yellow">
          RrYY
         </td>
         <td class="punnett-cell pea-round pea-yellow">
          RrYy
         </td>
         <td class="punnett-cell pea-wrinkled pea-yellow">
          rrYY
         </td>
         <td class="punnett-cell pea-wrinkled pea-yellow">
          rrYy
         </td>
        </tr>
        <tr>
         <th>
          ry
         </th>
         <td class="punnett-cell pea-round pea-yellow">
          RrYy
         </td>
         <td class="punnett-cell pea-round pea-green">
          Rryy
         </td>
         <td class="punnett-cell pea-wrinkled pea-yellow">
          rrYy
         </td>
         <td class="punnett-cell pea-wrinkled pea-green">
          rryy
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
   </section>
   <section class="content-section" id="s9">
    <div class="reveal max-w-4xl w-full bg-white p-8 rounded-xl shadow-lg">
     <h2 class="text-3xl font-bold mb-6 text-center">
      ğŸ¬ ì˜ìƒìœ¼ë¡œ ë³´ëŠ” ê°ìˆ˜ë¶„ì—´ê³¼ ë…ë¦½ë²•ì¹™
     </h2>
     <div class="aspect-w-16 aspect-h-9 rounded-lg overflow-hidden shadow-md">
      <div id="youtube-player">
      </div>
     </div>
     <div class="flex justify-center gap-4 mt-4">
      <button class="px-4 py-2 bg-lime-500 text-white rounded-lg hover:bg-lime-600" id="play-btn">
       <i class="fas fa-play">
       </i>
       20ì´ˆë¶€í„° ë³´ê¸°
      </button>
      <button class="px-4 py-2 bg-slate-500 text-white rounded-lg hover:bg-slate-600" id="pause-btn">
       <i class="fas fa-pause">
       </i>
       ì¼ì‹œì •ì§€
      </button>
     </div>
    </div>
   </section>
   <section class="content-section" id="s10">
    <div class="reveal max-w-2xl w-full bg-white p-8 rounded-2xl shadow-lg">
     <h3 class="text-2xl font-bold mb-4 text-center">
      ğŸ“ ê°œë… í™•ì¸ í€´ì¦ˆ
     </h3>
     <div class="quiz-container">
      <p class="text-xl font-bold mb-4">
       ìœ ì „ìí˜•ì´ RrYyì¸ ì™„ë‘ë¥¼ ìê°€ ìˆ˜ë¶„í•˜ì—¬ ì–»ì€ ìì†(F2) ì¤‘ì—ì„œ, í‘œí˜„í˜•ì´ 'ì£¼ë¦„ì§€ê³  í™©ìƒ‰(rrY_)'ì¼ í™•ë¥ ì€ ì–¼ë§ˆì¼ê¹Œìš”?
      </p>
      <div class="quiz-options space-y-3">
       <button class="quiz-option w-full text-left p-4 border rounded-lg text-lg" data-correct="false">
        1. 1/16
       </button>
       <button class="quiz-option w-full text-left p-4 border rounded-lg text-lg" data-correct="true">
        2. 3/16
       </button>
       <button class="quiz-option w-full text-left p-4 border rounded-lg text-lg" data-correct="false">
        3. 9/16
       </button>
       <button class="quiz-option w-full text-left p-4 border rounded-lg text-lg" data-correct="false">
        4. 1/4
       </button>
      </div>
      <div class="quiz-feedback mt-4 text-lg font-bold h-6 text-center">
      </div>
     </div>
    </div>
   </section>
   <section class="content-section text-center" id="s11">
    <div class="reveal">
     <h2 class="text-4xl font-bold text-lime-700">
      ğŸ‰ í•™ìŠµ ì™„ë£Œ!
     </h2>
     <p class="text-xl mt-4">
      ë…ë¦½ì˜ ë²•ì¹™ì— ëŒ€í•œ í•™ìŠµì„ ëª¨ë‘ ë§ˆì³¤ìŠµë‹ˆë‹¤.
      <br>
      ì´ í˜ì´ì§€ë¥¼ ë‹«ìœ¼ë©´ í•™ìŠµ ì§„í–‰ ìƒí™©ì´ ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.
     </p>
     <a class="mt-8 inline-block px-8 py-3 bg-lime-500 text-white font-bold rounded-lg shadow-md hover:bg-lime-600 transition" href="index.html">
      ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°
     </a>
    </div>
   </section>
  </main>
  <script>
   document.addEventListener('DOMContentLoaded', () => {
            gsap.registerPlugin(ScrollTrigger);
            
            // --- Side Navigation ---
            const sections = document.querySelectorAll('.content-section');
            const progressNav = document.getElementById('progress-nav');
            
            sections.forEach(section => {
                const link = document.createElement('a');
                link.href = `#${section.id}`;
                progressNav.appendChild(link);
            });
            const navLinks = progressNav.querySelectorAll('a');

            function updateNav(index) {
                navLinks.forEach((link, i) => link.classList.toggle('active', i === index));
            }

            sections.forEach((section, index) => {
                ScrollTrigger.create({
                    trigger: section,
                    start: 'top center',
                    end: 'bottom center',
                    onToggle: self => self.isActive && updateNav(index)
                });
            });

            // --- Fullscreen ---
            const fullscreenBtn = document.getElementById('fullscreen-btn');
            const fullscreenIcon = document.getElementById('fullscreen-icon');
            fullscreenBtn.addEventListener('click', () => {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen();
                } else if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            });
            document.addEventListener('fullscreenchange', () => {
                const isFullscreen = !!document.fullscreenElement;
                fullscreenIcon.classList.toggle('fa-expand', !isFullscreen);
                fullscreenIcon.classList.toggle('fa-compress', isFullscreen);
            });

            // --- GSAP Animations ---
            const revealElements = document.querySelectorAll('.reveal');
            revealElements.forEach(el => {
                gsap.fromTo(el, { opacity: 0, y: 40 }, {
                    opacity: 1, y: 0, duration: 1, ease: 'power3.out',
                    scrollTrigger: { trigger: el, start: 'top 85%', toggleActions: 'play none none none' }
                });
            });
            
            const punnettCells = gsap.utils.toArray('.punnett-cell');
            gsap.from(punnettCells, {
                scale: 0.5, opacity: 0, stagger: 0.05, duration: 0.5,
                scrollTrigger: { trigger: '#punnett-container', start: 'top 70%', toggleActions: 'play none none reverse' }
            });

            // --- Quiz Logic ---
            const quizContainers = document.querySelectorAll('.quiz-container');
            quizContainers.forEach(container => {
                const options = container.querySelectorAll('.quiz-option');
                const feedback = container.querySelector('.quiz-feedback');
                options.forEach(option => {
                    option.addEventListener('click', () => {
                        if (option.parentElement.dataset.answered) return;
                        option.parentElement.dataset.answered = 'true';
                        
                        option.classList.add('selected');
                        if (option.dataset.correct === 'true') {
                            option.classList.add('correct');
                            feedback.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‘ (ë¹„ìœ¨ 9:3:3:1ì—ì„œ 3ì— í•´ë‹¹)";
                            feedback.style.color = '#10b981';
                        } else {
                            option.classList.add('incorrect');
                            feedback.textContent = "ì•„ì‰½ë„¤ìš”. ì •ë‹µì€ 3/16ì…ë‹ˆë‹¤.";
                            feedback.style.color = '#ef4444';
                            container.querySelector('[data-correct="true"]').classList.add('correct');
                        }
                    });
                });
            });

            // --- LocalStorage for Progress Tracking ---
            ScrollTrigger.create({
                trigger: '#s11', // Final section
                start: 'top center',
                onEnter: () => {
                    console.log('í•™ìŠµ ì™„ë£Œ! ì§„í–‰ ìƒí™©ì„ ì €ì¥í•©ë‹ˆë‹¤.');
                    localStorage.setItem('mendelLawOfIndependenceLearned', 'true');
                }
            });
        });

        // --- YouTube IFrame API ---
        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtube-player', {
                height: '100%',
                width: '100%',
                videoId: 'CBezq1fFUEA', // A relevant video on meiosis/independent assortment
                playerVars: { 'playsinline': 1, 'controls': 0, 'rel': 0 },
                events: {
                    'onReady': onPlayerReady
                }
            });
        }
        function onPlayerReady(event) {
            const playBtn = document.getElementById('play-btn');
            const pauseBtn = document.getElementById('pause-btn');
            playBtn.addEventListener('click', () => { player.seekTo(20, true); player.playVideo(); });
            pauseBtn.addEventListener('click', () => { player.pauseVideo(); });
            
            // Auto-pause when scrolling out of view
            ScrollTrigger.create({
                trigger: '#youtube-player',
                start: 'top bottom',
                end: 'bottom top',
                onLeave: () => player.pauseVideo(),
                onLeaveBack: () => player.pauseVideo()
            });
        }
        
        // Load YouTube API script
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
  </script>
 </body>
</html>
